/*
 * @license Multi Input Mask plugin for jquery
 * https://github.com/vskripkin/inputmask-multi
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
 * Version: 0.0.1
 *
 * Requriements:
 * https://github.com/RobinHerbots/jquery.inputmask
 */
!function(t){var s=function(t,s){if(t=parseInt(t),s=parseInt(s)||t,!t){if(this.setSelectionRange)t=this.selectionStart,s=this.selectionEnd;else if(document.selection&&document.selection.createRange){var e=document.selection.createRange();t=0-e.duplicate().moveStart("character",-1e5),s=t+e.text.length}return{begin:t,end:s}}if(this.setSelectionRange)this.setSelectionRange(t,s);else if(this.createTextRange){var e=this.createTextRange();e.collapse(!0),e.moveEnd("character",s),e.moveStart("character",t),e.select()}},e=Object.keys||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var s=[];for(var e in t)s[s.length]=e;return s},i=function(t){for(var s=this.inputmasks.options,i="",n=0;n<t.length;n++){var a=t.charAt(n);if(a==this.inputmasks.placeholder)break;s.match.test(a)&&(i+=a)}for(var r in s.list){for(var o=s.list[r][s.listKey],c=!0,h=0,l=0;h<i.length&&l<o.length;){var u=o.charAt(l),p=i.charAt(h);if(s.match.test(u)||u in this.inputmasks.defs){if(!(u in this.inputmasks.defs&&this.inputmasks.defs[u].test(p)||p==u)){c=!1;break}h++,l++}else l++}if(c&&h==i.length){var m=-1==o.substr(l).search(s.match);o=o.replace(RegExp([s.match.source].concat(e(this.inputmasks.defs)).join("|"),"g"),s.replace);var d=-1==o.substr(l).search(s.replace);return{mask:o,obj:s.list[r],determined:m,completed:d}}}return!1},n=function(t,s,e){var i=this.inputmasks.options;if(!t)return 0;for(var n=0,a=0;n<e.begin;n++)t.charAt(n)==i.replace&&a++;for(var r=0;n<e.end;n++)t.charAt(n)==i.replace&&r++;for(n=0;n<s.length&&(a>0||s.charAt(n)!=i.replace);n++)s.charAt(n)==i.replace&&a--;for(a=n;n<s.length&&r>0;n++)s.charAt(n)==i.replace&&r--;return r=n,{begin:a,end:r}},a=function(){t(this).off(".inputmasks")},r=function(){events=t._data(this,"events");var s=["keydown","keypress","paste","dragdrop","drop","setvalue","reset","cut","blur"],e=this;t.each(s,function(s,i){t.each(e.inputmask.events[i],function(s,n){t(e).off(i,n)})})},o=function(s){var e=this;t.each(this.inputmask.events[s.type],function(t,i){i.call(e,s)})},c=function(){t(this).on("keydown.inputmasks",u).on("keypress.inputmasks",p).on("paste.inputmasks",d).on("dragdrop.inputmasks",d).on("drop.inputmasks",d).on("cut.inputmasks",d).on("setvalue.inputmasks",m).on("blur.inputmasks",m).on("reset.inputmasks",m)},h=function(e,i){var a=this.inputmasks.options;if(e&&(void 0!==i||e.mask!=this.inputmasks.oldmatch.mask)){var o;void 0===i?o=n.call(this,this.inputmasks.oldmatch.mask,e.mask,s.call(this)):(this.inputmask&&this.inputmask.remove(),this.value=i),t(this).inputmask(e.mask,t.extend(!0,a.inputmask,{insertMode:this.inputmasks.insertMode})),r.call(this),void 0===i&&s.call(this,o.begin,o.end)}this.inputmasks.oldmatch=e,a.onMaskChange.call(this,e.obj,e.determined)},l=function(t,s,e){var n=i.call(this,s);return n&&n.obj==this.inputmasks.oldmatch.obj&&n.determined==this.inputmasks.oldmatch.determined?(o.call(this,t),!0):(n?e?(h.call(this,n),o.call(this,t)):(o.call(this,t),h.call(this,n)):e&&this.inputmasks.insertMode||k.call(this,s),!1)},u=function(t){if(t.metaKey)return o.call(this,t),!0;var e=this.inputmasks.options;t=t||window.event;var i=t.which||t.charCode||t.keyCode;if(8==i||46==i||this.inputmasks.iphone&&127==i){var n=this.inputmask._valueGet(),a=s.call(this);if(a.begin==a.end){var r=a.begin;do{46!=i&&r--;var c=n.charAt(r);n=n.substring(0,r)+n.substring(r+1)}while(r>0&&r<n.length&&!e.match.test(c))}else n=n.substring(0,a.begin)+n.substring(a.end);return l.call(this,t,n,!1)}return 45==i&&(this.inputmasks.insertMode=!this.inputmasks.insertMode),o.call(this,t),!0},p=function(t){if(t.metaKey)return o.call(this,t),!0;var e=this.inputmask._valueGet();t=t||window.event;var i=t.which||t.charCode||t.keyCode,n=String.fromCharCode(i);return caretPos=s.call(this),e=caretPos.begin==caretPos.end&&e.charAt(caretPos.begin)==this.inputmasks.placeholder?e.substring(0,caretPos.begin)+n+e.substring(caretPos.end+1):e.substring(0,caretPos.begin)+n+e.substring(caretPos.end),l.call(this,t,e,!0)},m=function(){return k.call(this),!0},d=function(){var t=this;return setTimeout(function(){k.call(t)},0),!0},k=function(t){void 0===t&&(t=this.inputmask&&this.inputmask._valueGet?this.inputmask._valueGet():this.value);for(var s=i.call(this,t);!s&&t.length>0;)t=t.substr(0,t.length-1),s=i.call(this,t);h.call(this,s,t)},f=function(s){s=t.extend(!0,{onMaskChange:t.noop},s);var e={};for(var i in s.inputmask.definitions){var n=s.inputmask.definitions[i].validator;switch(typeof n){case"string":e[i]=RegExp(n);break;case"object":"test"in s.definitions[i].validator&&(e[i]=n);break;case"function":e[i]={test:n}}}s.inputmask.definitions[s.replace]={validator:s.match.source,cardinality:1},this.inputmasks&&t(this).inputmasks("remove"),this.inputmasks={},this.inputmasks.options=s,this.inputmasks.defs=e,this.inputmasks.iphone=null!=navigator.userAgent.match(/iphone/i),this.inputmasks.oldmatch=!1,this.inputmasks.placeholder=s.inputmask.placeholder||Inputmask.prototype.defaults.placeholder,this.inputmasks.insertMode=void 0!==s.inputmask.insertMode?s.inputmask.insertMode:Inputmask.prototype.defaults.insertMode,k.call(this)};t.fn.inputmasks=function(s){if("isCompleted"===s){var e=this[0],n=i.call(e,e.inputmask&&e.inputmask._valueGet()||e.value);return n&&n.completed}return this.each(function(){return"remove"===s?(a.call(this),this.inputmasks=void 0,void t(this).inputmask("remove")):(f.call(this,s),void c.call(this))})}}(jQuery);